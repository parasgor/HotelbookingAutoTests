Java CucmberAutomation tests
 
 [![Build Status](https://travis-ci.com/iljapavlovs/cucumber-jvm-parallel-template.svg?branch=master)](https://travis-ci.com/iljapavlovs/cucumber-jvm-parallel-template)
=======================

Test the hotel booking application 


## How to run
### Command for execution
```
./mvnw clean verify -P [nogrid OR grid],[parallel OR parallelPlugin] -Dthreads=[number of parallel threads]
```

* *parallel* - when using separate "runner" class per one thread
* *parallelPlugin* - uses cucumber-jvm-parallel-plugin. Automatically creates separate "runner" class per one thread
* *nogrid* - execute tests locally
* *grid* - execute tests on Selenium Grid. Grid Hub can be set in pom by using `seleniumGridUrl` property or in ApplicationProperties file 
* Thread count can be set via `-Dthreads` argument

For example, invoking 
```
./mvnw clean verify -P nogrid -Dthreads=3 -Dbrowser=chrome
``` 
will execute tests in parallel 3 threads on local machine and using *cucumber-jvm-parallel-plugin* plugin. In addition, `-Dbrowser` setting will set browser to Chrome.

## Configuration
Following settings can be changed in `com.hotelbooking.config.ApplicationProperties.java` or overriden by from command line by providing `-D{configuration key}={value}` 

| Configuration key     | Description                                                       |
|-----------------------|----------------------|
| *env*   | environment name |_
| *appUrl*       | AUT URL                 |
| *browser*     | Browser to use. Available options - `chrome, firefox, safari, edge, ie, chrome_headless, firefox_headless`                  |
| *proxyEnabled*    | is proxy enabled for Selenium (boolean) |
| *proxyHost* | proxy host                     |
| *proxyPort* | proxy port                    |
| *remoteDriver*  | should tests be executed on Selenium Grid (boolean)                       |
| *seleniumGridRetries* | RemoteWebdriver initialization retry count                |
| *seleniumGridUrl*     | Selenium Grid Hub URL                 |
| *waitShortSeconds*    | timeout for explicit wait - shortest timeout |
| *waitNormalSeconds* | timeout for explicit wait - average timeout                     |
| *waitLongSeconds* | timeout for explicit wait - longest timeout                      |


## Reporting
Reports are generated by [maven-cucumber-reporting](https://github.com/damianszczepanik/maven-cucumber-reporting) plugin and can be found under *target/site/cucumber-reports/cucumber-html-reports*

## Setting up Selenium Grid in Docker Containers

#### Selenium

```
docker-compose -f docker/docker-compose-selenium.yml up
```

##### Scaling
```
docker-compose scale selenium-hub=1 firefox=5 chrome=5 
```